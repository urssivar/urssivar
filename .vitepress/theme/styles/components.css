@layer components {
  #app {
    @apply isolate;
  }

  a {
    @apply transition-colors duration-200 underline underline-offset-[0.15em] decoration-(--ui-text-muted) hover:decoration-(--ui-text-highlighted);
  }

  .navlinks {
    @apply text-muted font-[450];

    a {
      @apply py-1.5 px-3 no-underline hover:text-highlighted!;

      &.active {
        @apply text-highlighted!;
      }
    }
  }

  /* Header anchor links (§ symbols next to headings) */
  *:has(> .header-anchor) {
    @apply relative;

    > .header-anchor {
      @apply absolute font-normal left-0 -translate-x-full text-muted select-none transition-[opacity,color] duration-200 hover:text-highlighted! opacity-0 no-underline pr-[0.375em];
    }

    &:hover > .header-anchor {
      @apply opacity-100;
    }
  }

  h1 .header-anchor {
    @apply hidden;
  }

  /* Full-width content blocks (e.g., tables, images) */
  .breakout {
    @apply max-w-full bg-elevated px-6 sm:px-12 md:px-16 py-2 my-8 print:break-inside-avoid overflow-x-auto;

    td {
      @apply text-nowrap;
    }

    /* Image variant: no background, full-width with caption */
    &.img {
      @apply bg-transparent p-0;

      > :nth-child(1) {
        @apply m-0 overflow-hidden;

        > img {
          @apply object-cover object-center;
        }
      }

      > :nth-child(2) {
        @apply mt-3 mx-16 text-center text-xs text-toned;
      }
    }
  }

  /* Nested list styling within blockquote and breakout containers */
  blockquote,
  .breakout {
    p,
    table,
    ol,
    ul {
      @apply my-2;
    }
    ul {
      list-style-type: "– ";
    }
  }

  /* Auto-numbering for sections (e.g., "1.2.3 Heading") */
  [data-numbering]::before {
    content: attr(data-numbering);
    @apply mr-[0.5em] select-none;
  }
}
